/*
sGlide is a jQuery plugin that generates a simple, highly flexible, feature-rich & mobile ready slider.
Copyright (C) 2013  Daniel Kazmer
See <http://www.gnu.org/licenses/gpl.html>

author:		Daniel Kazmer - http://iframework.net
created:	24.11.2012
version:	1.10.0
*/
(function(e){var t={destroy:function(){var n=this;var r=n.selector;var i=n.attr("id");if(e("."+i+"_vert-marks")[0]){var s=e("."+i+"_vert-marks");if(s.data("wrap")!==undefined){s.unwrap();s.removeAttr("data-wrap")}}if(e("#"+i+"_plus")[0])e("#"+i+"_minus, #"+i+"_plus").remove();if(n.data("wrap")!==undefined){n.unwrap();n.removeAttr("data-wrap")}else n.css({"-webkit-transform":"translate3d(0,0,0)","-khtml-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)","-ms-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"});if(e(r+"_markers").length>0)e(r+"_markers").remove();var o="mousedown",u="mouseup",a="mousemove";if(t.mobile){o="touchstart";u="touchend";a="touchmove"}else e(document).off("keydown."+i).off("keyup."+i);if(t.buttons){e("#"+i+"_plus").off(o).off(u);e("#"+i+"_minus").off(o).off(u)}e(document).off(a+"."+i).off(u+"."+i);e(window).off("orientationchange."+i);n.off(o);n.children(".slider_knob").off(u).off(o).remove();n.children(".follow_bar").off(o).remove();e(r).removeAttr("style").removeAttr("data-state")},startAt:function(e,n){var r=this;var i=this.children(".slider_knob");var s=this.children(".follow_bar");if(typeof n!="boolean")n=false;if(e<=0){e=0;if(!n){i.css("left","0px");s.css("width","0px")}else{i.animate({left:"0px"},200);s.animate({width:"0px"},200)}}else if(e>=100){e=100;if(!n){i.css("left",r.width()-i.width()+"px");s.css("width",r.width()+"px")}else{i.animate({left:r.width()-i.width()+"px"},200);s.animate({width:r.width()+"px"},200)}}else{var o=r.width()*e/100;if(t.img){if(!n)i.css("left",o-i.width()/2+"px");else i.animate({left:o-i.width()/2+"px"},200)}else{if(!n)i.css("left",o+"px");else i.animate({left:o+"px"},200)}if(!n)s.css("width",o+"px");else s.animate({width:o+"px"},200)}},init:function(n){this.html('<div class="follow_bar"></div><div class="slider_knob"></div>');var r=this;var i=r.children(".slider_knob");var s=r.children(".follow_bar");var o=r.attr("id");var u=e.extend({startAt:0,image:"none",height:40,width:100,unit:"%",pill:true,snap:{markers:false,hard:false,onlyOnDrop:false,points:0},disabled:false,colorStart:"",colorEnd:"",vertical:false,showKnob:true,buttons:false},n);r.removeAttr("style");var a=false;var f="mousedown",l="mouseup",c="mousemove";var h=navigator.userAgent;if(h.match(/Android/i)||h.match(/webOS/i)||h.match(/iPhone/i)||h.match(/iPad/i)||h.match(/iPod/i)||h.match(/BlackBerry/i)){t.mobile=a=true;f="touchstart";l="touchend";c="touchmove";if(window.navigator.msPointerEnabled){f="MSPointerDown";l="MSPointerUp";c="MSPointerMove"}var p=null,d=null}else if(h.match(/Windows Phone/i)){r.on("MSGestureStart MSGestureChange",function(e){e.preventDefault()})}var v=u.startAt;var m=0;var g=u.vertical;var y=u.snap.points>0&&u.snap.points<=9&&u.snap.markers;var b="#333";var w=u.showKnob?"2%":"0";var E=Math.round(u.height)+"px";var S="inherit";var x=u.pill;var T=0,N="#666";var C=u.image!="none"&&u.image!==""&&!u.disabled;var k=false;if(C){t.img=u.image;i.html('<img src="'+u.image+'" style="visibility:hidden" />');i.children("img").load(function(){k=true;i.css("width","auto");var t=e(this).height();w=e(this).width()+"px";S=t+"px";b="url("+u.image+")";i.css({width:w,height:S,background:b});s.css({height:S,"border-radius":x?t/2+"px 0 0 "+t/2+"px":"0px"});r.css({height:S,"border-radius":x?t/2+"px":"0px"});e(this).remove();r.knobMarginValue=0;if(t>u.height){knobMarginValue=(t-u.height)/2;r.css({height:u.height+"px","margin-top":knobMarginValue+"px"});i.css({top:"-"+knobMarginValue+"px"});s.css({height:u.height+"px","border-radius":x?t/2+"px 0 0 "+t/2+"px":"0px"})}else{r.css("overflow","hidden");s.find("div").css("height",S)}at()})}else{k=true;r.css({"border-radius":x?u.height/2+"px":"0px"});if(i.children("img").height()<=u.height){r.css("overflow","hidden")}else{s.css("border-radius",x?u.height/2+"px":"0px")}}var L=u.unit,A=u.width;if(L!="px"&&L!="%")L="%";else if(L=="px")A=Math.round(A);else if(L=="%"&&Math.round(A)>100)A=100;var O={"-webkit-box-sizing":"content-box","-khtml-box-sizing":"content-box","-moz-box-sizing":"content-box","-ms-box-sizing":"content-box","box-sizing":"content-box"},M={"-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"},_={"-webkit-transform":"rotate(-90deg)","-khtml-transform":"rotate(-90deg)","-moz-transform":"rotate(-90deg)","-ms-transform":"rotate(-90deg)",transform:"rotate(-90deg)","-webkit-transform-origin":"0 0","-khtml-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0",filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)"};r.css({width:A+L,height:E,"text-align":"left",margin:"auto",cursor:!u.disabled?"pointer":"default","z-index":"997",position:"relative","-webkit-touch-callout":"none"}).css(O).css(M);i.css({width:w,background:b,height:S,display:!u.disabled?"inline-block":"none","font-size":"0px",position:"relative","z-index":"999"}).css(O);s.css({position:!u.disabled?"absolute":"static",height:i.height()+"px",width:"0px","z-index":"998"}).css(O);var D=false;var P=Math.round(u.snap.points);var H=[0];var B=function(){if(P>0&&P<10){if(P===1)P=2;var t=i.width();var n=r.width()-t;var s=n/(P-1);var a=[0];var f=s;while(f<=n+2){a.push(f);f+=s}s=100/(P-1);f=s;while(f<=101){H.push(f);f+=s}D=true;if(y){r.after('<div id="'+o+'_markers"></div>');var l=e("#"+o+"_markers");l.css({width:u.width+L,margin:"auto","padding-left":(!g?t:t/2)+"px","-webkit-touch-callout":"none"}).css(O).css(M);for(var c=0;c<a.length;c++){l.append('<div style="display:inline-block; width:0; height:5px; border-left:#333 solid 1px; position:relative; left:'+(a[c]-c)+'px; top:-5px"></div>')}}}};if(g&&y&&P>0&&P<10){e(r.selector+", #"+o+"_markers").wrapAll('<div class="'+o+'_vert-marks"></div>');var j=e("."+o+"_vert-marks");r.attr("data-wrap","true");j.css({width:A+L,"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","backface-visibility":"hidden"}).css(O).css(_);e(j.selector+" > div").css("margin","0")}else if(g){var F=r.width(),I=r.height();r.css({margin:"0","-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-ms-backface-visibility":"hidden","backface-visibility":"hidden"}).css(_)}var q=function(){if(!k)return false;clearInterval(W);X=i.width()/r.width()*50;if(u.buttons){t.buttons=true;var n="; z-index:1000; position:relative; top:30px; float:left";if(y){e(g?"."+o+"_vert-marks":r.selector+", #"+o+"_markers").wrapAll('<div id="'+o+'_button-marks" style="display:inline-block; vertical-align:text-top;"></div>');if(g)e("."+o+"_vert-marks").attr("data-wrap","true");else r.attr("data-wrap","true");var s=e("#"+o+"_button-marks");s.after('<div class="sglide-buttons" id="'+o+'_plus" style="display:inline-block; cursor:pointer'+(g?n:"")+'">&nbsp;+&nbsp;</div>').before('<div class="sglide-buttons" id="'+o+'_minus" style="display:inline-block; cursor:pointer'+(g?n:"")+'">&nbsp;&minus;&nbsp;</div>')}else{r.css({display:"inline-block","vertical-align":"text-bottom"}).after('<div class="sglide-buttons" id="'+o+'_plus" style="display:inline-block; cursor:pointer'+(g?n:"")+'">&nbsp;+&nbsp;</div>').before('<div class="sglide-buttons" id="'+o+'_minus" style="display:inline-block; cursor:pointer'+(g?n:"")+'">&nbsp;&minus;&nbsp;</div>')}e(".sglide-buttons").css(M);e("#"+o+"_plus").on(f,function(){V=true;R(">");J=setTimeout(function(){U(">")},1e3)}).on(l,function(){z()});e("#"+o+"_minus").on(f,function(){V=true;R("<");J=setTimeout(function(){U("<")},1e3)}).on(l,function(){z()})}},R=function(e,t){if(t===undefined)t=false;var a=v;if(K){var f=100/(u.snap.points-1);var l=f;for(var c=0;c<u.snap.points;c++){if(f>=v){if(e==">")v=Math.round(f)>Math.round(v)?f:f+l;else v=f-l;break}else f+=l}}else{if(e==">")v+=t?1:10;else v-=t?1:10}a=v;if(v+X>100){v=100;a=100-X}else if(v-X<0){v=0;a=0+X}if(!t){i.animate({left:a-X+"%"},200);s.animate({width:a+"%"},200);if(rt)setTimeout(function(){st(s.width())},200)}else{i.css("left",a-X+"%");s.css("width",a+"%");if(rt)st(s.width())}if(n.onButton)n.onButton({guid:o,value:v,el:r})},U=function(e){var t=setInterval(function(){if(V)R(e,K?false:true);else clearInterval(t)},K?201:10)},z=function(){V=false;clearTimeout(J)},W=setInterval(q,100),X=0,V=false,J=null;var K=u.snap.points>0&&u.snap.points<=9&&(u.snap.hard||u.snap.onlyOnDrop);var Q=false;i.on(f,function(){Q=true;r.attr("data-state","active")}).on(l,function(){Q=false});var G="s-1";var Y=function(t,n){if(P>0&&P<10){var o=i.width();var a=r.width();var f=a*(10-P)/100-2;var l=[];for(var c=0;c<H.length;c++){l.push((a-o)*H[c]/100)}var h=null,p=0;e.each(l,function(e){if(h===null||Math.abs(this-n)<Math.abs(h-n)){h=this;p=H[e]}});if(t=="drag"){if(u.snap.hard){i.css("left",h+"px");s.css("width",h+o/2+"px");Z(h,p)}else{if(Math.round(Math.abs(h-n))<f){i.css("left",h+"px");s.css("width",h+o/2+"px");Z(h,p)}else G="s-1"}}else{i.animate({left:h+"px"},"fast");s.animate({width:h+o/2+"px"},"fast");return h}}},Z=function(e,t){if(n.onSnap&&"s"+e!==G){G="s"+e;n.onSnap({guid:o,value:t,el:r})}};if(!a){var et,tt=false;e(document).on("keydown."+o,function(e){if(!tt){if(window.event)et=window.event.keyCode;else if(e)et=e.which;if(r.attr("data-keys")=="true"){if(et==37||et==40){V=true;R("<");J=setTimeout(function(){U("<")},1e3)}else if(et==39||et==38){V=true;R(">");J=setTimeout(function(){U(">")},1e3)}}tt=true}}).on("keyup."+o,function(){tt=false;z()})}if(a){e(document).on(f+"."+o,function(e){p=e.originalEvent.touches[0].pageX;d=e.originalEvent.touches[0].pageY})}if(a||h.match(/Windows Phone/i)){e(window).on("orientationchange."+o,function(){u.startAt=v;r.sGlide("destroy");r.sGlide(u)})}e(document).on(c+"."+o,function(e){e=e||event;var t=null;if(g){var o=r.position().top+r.width();if(a){d=e.originalEvent.touches[0].pageY;t=o-d}else t=o-e.pageY}else{if(a){p=e.originalEvent.touches[0].pageX;t=p-r.offset().left}else t=e.pageX-r.offset().left}var f=i.width()/2;var l=t-f;if(Q){e.stopPropagation();e.preventDefault();if(e.returnValue)e.returnValue=false;if(t<=f){i.css("left","0px");s.css("width","0px")}else if(t>=r.width()-f){i.css("left",r.width()-i.width()+"px");s.css("width",r.width()-i.width()/2+"px")}else{i.css("left",t-i.width()/2+"px");s.css("width",t+"px");if(!u.snap.onlyOnDrop)Y("drag",l)}}m=i.css("left");m=m.replace("px","");if(n.drag&&r.attr("data-state")=="active")n.drag(nt(m));if(rt&&r.attr("data-state")=="active"){st(m)}}).on(l+"."+o,function(e){Q=false;if(r.attr("data-state")=="active"){e=e||event;var t=null;if(g){var s=r.position().top+r.width();t=s-((!a?e.pageY:d)-2)}else t=(!a?e.pageX:p)-r.offset().left;var o=i.width();var f=t-o/2;if(P>0&&P<10&&u.snap.onlyOnDrop)m=Y("drop",f);else{var l=null;if(!g)l=i.offset().left-r.offset().left;else l=Math.abs(i.offset().top+i.height()-s);if(l<0)i.css("left","0px");else if(l>r.width()-o)i.css("left",r.width()-o+"px");m=i.css("left");m=m.replace("px","")}if(n.drop)n.drop(nt(m));if(n.drag&&r.attr("data-state")=="active")n.drag(nt(m));r.attr("data-state","inactive");if(rt)st(m)}if(V)z()});var nt=function(e){if(r.attr("data-state")=="active"){e=parseFloat(e,10);var t=e/(r.width()-i.width())*100;v=t;return{guid:o,value:t,el:r}}};var rt=false;if(u.colorStart!==""&&u.colorEnd!==""){var it="border-radius: "+(x?e(this).height()/2+"px 0 0 "+e(this).height()/2+"px":"0px");s.css({overflow:"hidden","background-color":u.colorStart}).html('<div style="opacity:'+u.startAt/100+"; height:"+r.height()+"px; background-color:"+u.colorEnd+"; "+it+'"></div>');rt=true}var st=function(e){s.find("div").css({opacity:parseFloat(e,10)/(r.width()-i.width())})};var ot=function(e){e=e||event;e.stopPropagation();e.preventDefault();if(e.returnValue)e.returnValue=false;Q=true;r.attr("data-state","active");if(!a&&!u.snap.onlyOnDrop){var t=null;if(g){var n=r.position().top+r.width();t=n-(e.pageY-2)}else t=e.pageX-r.offset().left;var o=t-i.width()/2;i.css("left",o+"px");s.css("width",o+i.width()/2+"px");if(o<0)i.css("left","0px");else if(o>=r.width()-i.width())i.css("left",r.width()-i.width()+"px")}};if(!u.disabled){r.on(f,function(e){ot(e)});s.on(f,function(e){ot(e)})}var ut=!C;var at=function(){var e=u.startAt;if(e<=0){e=0;i.css("left","0px");s.css("width","0px")}else if(e>=100){e=100;i.css("left",r.width()-i.width()+"px");s.css("width",r.width()+"px")}else{var t=r.width()*e/100;if(u.image!="none"&&u.image!==""){i.children("img").load(function(){i.css("left",t-i.width()/2+"px")})}else i.css("left",t+"px");s.css("width",t+"px")}var a={guid:o,value:e,el:r};if(n.drop)n.drop(a);if(n.drag)n.drag(a);if(ut)B();ut=true};at();if(n.onload){var ft=setInterval(function(){if(k){n.onload();clearInterval(ft)}},100)}}};e.fn.sGlide=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"||!n){return t.init.apply(this,arguments)}else{e.error("Method "+n+" does not exist on jQuery.sGlide")}}})(jQuery)